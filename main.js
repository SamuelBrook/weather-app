(()=>{"use strict";const e=e=>Math.round(2*e)/2;class t{constructor(e,t,n,r,c,i){this.name=e,this.temp=t,this.maxTemp=n,this.minTemp=r,this.weather=c,this.weatherDescription=i}}const n=async function(n){const r=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${n}&appid=4edfb59f5bfcf1af7802721ab2c0c219`,{mode:"cors"}),c=await r.json();let i=(t=>({temp:e(t.main.temp-273.15)+"°C",maxTemp:e(t.main.temp_max-273.15)+"°C",minTemp:e(t.main.temp_min-273.15)+"°C"}))(c),o=(e=>({mainWeather:e.weather[0].main,weatherDescription:e.weather[0].description}))(c),a=c.name;return new t(a,i.temp,i.maxTemp,i.minTemp,o.mainWeather,o.weatherDescription)},r=document.createElement("img");r.src="../src/images/clouds.svg";const c=document.createElement("img");c.src="../src/images/clouds-few.svg";const i=document.createElement("img");i.src="../src/images/sun.svg";const o=document.createElement("img");o.src="../src/images/rain.svg";const a=document.createElement("img");a.src="../src/images/thunder.svg";const m=document.createElement("img");m.src="../src/images/snow.svg";const s=document.createElement("img");s.src="../src/images/mist.svg";const d=()=>{document.querySelector("#display-box").classList.toggle("visibility"),document.querySelector("#loader").classList.toggle("display")},l=e=>{document.querySelector("#location").textContent=e.name,document.querySelector("#description").textContent=e.weatherDescription,(e=>{const t=document.querySelector("#picture");"Clear"===e.weather?t.appendChild(i):"few clouds"===e.weatherDescription?t.appendChild(c):"scattered clouds"===e.weatherDescription||"broken clouds"===e.weatherDescription||"overcast clouds"===e.weatherDescription?t.appendChild(r):"Rain"===e.weather||"Drizzle"===e.weather?t.appendChild(o):"Thunderstorm"===e.weather?t.appendChild(a):"Snow"===e.weather?t.appendChild(m):t.appendChild(s)})(e);const t=document.querySelector("#temp"),n=document.querySelector("#min"),d=document.querySelector("#max"),l=document.createElement("div"),p=document.createElement("div");t.appendChild(p),t.appendChild(l),p.textContent="Current",l.textContent=e.temp;const u=document.createElement("div"),h=document.createElement("div");n.appendChild(h),n.appendChild(u),u.textContent=e.minTemp,h.textContent="Min";const C=document.createElement("div"),g=document.createElement("div");d.appendChild(g),d.appendChild(C),C.textContent=e.maxTemp,g.textContent="Max"};d(),n("London").then((e=>{l(e),d()})).catch((e=>{alert("Error finding information, please try again later"),d()})),(()=>{const e=document.querySelector("form"),t=document.querySelector("input");e.addEventListener("submit",(e=>{e.preventDefault();let r=t.value;d(),n(r).then((e=>{(()=>{const e=document.querySelector("#picture"),t=document.querySelector("img"),n=document.querySelector("#temp"),r=document.querySelector("#min"),c=document.querySelector("#max");for(e.removeChild(t);n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)r.removeChild(r.firstChild);for(;c.firstChild;)c.removeChild(c.firstChild)})(),l(e),d()})).catch((()=>{alert("Enter a valid city name"),d()}))}))})()})();